<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>éšæœºé€‰èœå°å·¥å…·</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2em auto; padding: 1em; }
    textarea { width: 100%; height: 200px; }
    input[type=number] { width: 60px; }
    button { padding: 0.5em 1em; font-size: 1em; }
    ul { list-style: disc; padding-left: 1.5em; }
    #result { margin-top: 1em; font-size: 1.2em; color: #2c3e50; }
  </style>
</head>
<body>
  <h1>ğŸ± éšæœºé€‰èœå°å·¥å…·</h1>

  <p>è¯·è¾“å…¥èœå•åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªèœåï¼‰:</p>
  <textarea id="menuInput" placeholder="ä¾‹ï¼š\nçº¢çƒ§è‚‰\nå®«ä¿é¸¡ä¸\né±¼é¦™è‚‰ä¸\néº»å©†è±†è…"></textarea>

  <p>
    æ¯æ¬¡éšæœºé€‰æ‹© 
    <input type="number" id="count" value="2" min="1" max="100"> ä¸ªèœ
    <button onclick="pick()">å¼€å§‹é€‰æ‹©</button>
    <button onclick="clearMenu()">æ¸…ç©ºèœå•</button>
  </p>

  <div id="result"></div>

  <script>
    const textarea = document.getElementById("menuInput");
    const countInput = document.getElementById("count");

    // å°è¯•ä»æœ¬åœ°åŠ è½½èœå•
    window.onload = () => {
      const saved = localStorage.getItem("menuList");
      if (saved) textarea.value = saved;
    };

    function pick() {
      const lines = textarea.value.split("\n").map(s => s.trim()).filter(s => s);
      const count = Math.min(parseInt(countInput.value), lines.length);
      if (lines.length === 0) {
        alert("è¯·å…ˆè¾“å…¥èœå•ï¼");
        return;
      }

      // ä¿å­˜åˆ° localStorage
      localStorage.setItem("menuList", textarea.value);

      // éšæœºæŠ½å–
      const temp = [...lines];
      const result = [];
      for (let i = 0; i < count; i++) {
        const index = Math.floor(Math.random() * temp.length);
        result.push(temp.splice(index, 1)[0]);
      }

      // æ˜¾ç¤ºç»“æœ
      document.getElementById("result").innerHTML =
        `<h2>ğŸ‰ ä»Šå¤©å¯ä»¥åƒï¼š</h2><ul>${result.map(item => `<li>${item}</li>`).join("")}</ul>`;
    }

    function clearMenu() {
      if (confirm("ç¡®å®šè¦æ¸…ç©ºèœå•å—ï¼Ÿ")) {
        textarea.value = "";
        localStorage.removeItem("menuList");
      }
    }
  </script>
</body>
</html>
